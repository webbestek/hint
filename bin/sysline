# ----------------------------------------------------------------------------
# Copyright (c) 2025 Kevin Ahrens
# Made with â¤ï¸ by Kevin â€” and the community.
# Licensed under the MIT License (see LICENSE).
# ----------------------------------------------------------------------------
#!/usr/bin/env bash
set -euo pipefail

# Require starship presence (soft check)
command -v starship >/dev/null 2>&1 || exit 0

load="$(cut -d ' ' -f1 < /proc/loadavg 2>/dev/null || echo '?')"
ram_line="$(free -h | awk '/Mem:/ {print $3 "/" $2}' 2>/dev/null)"
disk_pct="$(df -h . 2>/dev/null | awk 'NR==2{print $5}')"

bat_pct=""
for b in /sys/class/power_supply/BAT*/capacity; do
  [[ -r "$b" ]] && bat_pct="$(cat "$b")%" && break
done

out="ğŸ–¥ load ${load}  |  ğŸ§  RAM ${ram_line}  |  ğŸ’½ ${disk_pct}"
[[ -n "${bat_pct}" ]] && out="${out}  |  ğŸ”‹ ${bat_pct}"
out="${out}  |  ğŸ’¡ type hint"

printf "%s\n" "$out"
