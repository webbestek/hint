#!/usr/bin/env bash
set -euo pipefail

user="$(whoami 2>/dev/null || echo user)"
load="$(cut -d ' ' -f1 < /proc/loadavg 2>/dev/null || echo '?')"
ram_line="$(free -h 2>/dev/null | awk '/Mem:/ {print $3 "/" $2}')"
disk_pct="$(df -h . 2>/dev/null | awk 'NR==2{print $5}')"
bat_pct=""; for b in /sys/class/power_supply/BAT*/capacity; do [[ -r "$b" ]] && bat_pct="$(cat "$b")%" && break; done

sep="  |  "
out="ğŸ‘¤ ${user}${sep}ğŸ–¥ load ${load}${sep}ğŸ§  RAM ${ram_line}${sep}ğŸ’½ ${disk_pct}"
[[ -n "${bat_pct}" ]] && out="${out}${sep}ğŸ”‹ ${bat_pct}"
out="${out}${sep}âœ§ type hint"
printf "%s\n" "$out" || true
